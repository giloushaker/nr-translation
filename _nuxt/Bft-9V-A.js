const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./C1nbJLsP.js","./esT4bswo.js","./entry.Dr0sCHZ6.css"])))=>i.map(i=>d[i]);
import{d as N,r as S,o as R,Q as T,x as i,B,K as _,R as z,z as e,A as r,L as I,M,J as D,I as E,S as F,y as l,T as f,_ as V}from"./esT4bswo.js";import{u as A,_ as $}from"./Boax9MkX.js";import{u as H}from"./D7ewN1DE.js";const J={class:"container"},O={key:0},U={class:"header"},j={key:0,class:"system-info"},G={class:"languages-grid"},K=["onClick"],Q={class:"language-header"},q={class:"language-code"},W={class:"stats-container"},X={class:"stat-row"},Y={class:"progress-bar"},Z={class:"progress-text"},ee={class:"stat-row"},te={class:"progress-bar"},se={class:"progress-text"},ae={class:"stat-details"},ne={class:"stat-item"},oe={class:"stat-value"},re={class:"stat-item"},ie={class:"stat-value"},le={class:"stat-item"},de={class:"stat-value"},ce={key:0,class:"no-languages"},ue=N({__name:"[system]",setup(me){const c=D(),m=E(),p=A(),v=H(),u=S([]),d=S(""),h=[{code:"en",name:"English"},{code:"es",name:"Spanish"},{code:"fr",name:"French"},{code:"de",name:"German"},{code:"it",name:"Italian"},{code:"pt",name:"Portuguese"},{code:"ru",name:"Russian"},{code:"ja",name:"Japanese"},{code:"zh",name:"Chinese"}],w=()=>h.map(a=>({code:a.code,name:a.name,translatedPercent:0,reviewedPercent:0,totalStrings:0,translatedStrings:0,untranslatedStrings:0})),b=async(a,t)=>h.map(n=>{const s=t?.languages?.[n.code];if(s){const o=s.total||0,g=s.translated||0,C=s.reviewed||0,x=o-g;return{code:n.code,name:n.name,translatedPercent:o>0?Math.round(g/o*100):0,reviewedPercent:o>0?Math.round(C/o*100):0,totalStrings:o,translatedStrings:g,untranslatedStrings:Math.max(0,x)}}else return{code:n.code,name:n.name,translatedPercent:0,reviewedPercent:0,totalStrings:0,translatedStrings:0,untranslatedStrings:0}}),L=async a=>{await p.withLoading(async t=>{try{t(20,"Loading system information..."),console.log("Loading system:",a);const n=await F(()=>import("./C1nbJLsP.js"),__vite__mapDeps([0,1,2]),import.meta.url);d.value=await n.getSystemName(a),console.log("System name loaded:",d.value),t(50,"Loading translation statistics...");let s=null;if(v.backend.isAvailable())try{console.log("Loading stats from backend for system:",a),s=await v.backend.getStats(a),console.log("Backend stats loaded:",s)}catch(o){console.warn("Failed to load stats from backend:",o)}t(80,"Preparing language data..."),u.value=await b(a,s),t(100,"Complete!"),await new Promise(o=>setTimeout(o,300))}catch(n){console.error("Failed to load system:",n,"for systemId:",a),d.value=a,u.value=w()}},"Initializing...")},y=async()=>{const a=c.params.system;if(console.log("Languages page init:",{systemId:a,path:c.path}),!a){console.log("No systemId in languages page, redirecting to home"),m.push("/");return}await L(a)};R(y),T(()=>c.params.system,async()=>{await y()});const k=()=>{m.push("/")},P=a=>{const t=c.params.system;m.push(`/translate/${encodeURIComponent(t)}/${a}`)};return(a,t)=>{const n=$;return l(),i("div",J,[B(n,{title:"Loading System"}),z(p).isLoading?_("",!0):(l(),i("div",O,[e("div",U,[e("button",{onClick:k,class:"back-button"},"← Back to Home"),t[0]||(t[0]=e("h1",null,"Select Language",-1)),d.value?(l(),i("div",j," System: "+r(d.value),1)):_("",!0)]),e("div",G,[(l(!0),i(I,null,M(u.value,s=>(l(),i("div",{key:s.code,class:"language-card",onClick:o=>P(s.code)},[e("div",Q,[e("h3",null,r(s.name),1),e("span",q,r(s.code),1)]),e("div",W,[e("div",X,[t[1]||(t[1]=e("span",{class:"stat-label"},"Translated:",-1)),e("div",Y,[e("div",{class:"progress-fill translated",style:f({width:s.translatedPercent+"%"})},null,4),e("span",Z,r(s.translatedPercent)+"%",1)])]),e("div",ee,[t[2]||(t[2]=e("span",{class:"stat-label"},"Reviewed:",-1)),e("div",te,[e("div",{class:"progress-fill reviewed",style:f({width:s.reviewedPercent+"%"})},null,4),e("span",se,r(s.reviewedPercent)+"%",1)])]),e("div",ae,[e("div",ne,[e("span",oe,r(s.totalStrings),1),t[3]||(t[3]=e("span",{class:"stat-sublabel"},"Total strings",-1))]),e("div",re,[e("span",ie,r(s.translatedStrings),1),t[4]||(t[4]=e("span",{class:"stat-sublabel"},"Translated",-1))]),e("div",le,[e("span",de,r(s.untranslatedStrings),1),t[5]||(t[5]=e("span",{class:"stat-sublabel"},"Untranslated",-1))])])])],8,K))),128))]),u.value.length===0?(l(),i("div",ce," No languages available. Please load a game system first. ")):_("",!0)]))])}}}),ve=V(ue,[["__scopeId","data-v-cf2db92d"]]);export{ve as default};
//# sourceMappingURL=Bft-9V-A.js.map
