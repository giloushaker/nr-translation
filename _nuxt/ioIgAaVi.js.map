{"version":3,"file":"ioIgAaVi.js","sources":["../../../../../../../pages/index.vue"],"sourcesContent":["<template>\n  <div class=\"container\">\n    <h1>Load Game System</h1>\n\n    <!-- Quick Select Repositories -->\n    <div class=\"input-section\">\n      <h2>Quick Select</h2>\n      <div class=\"repo-grid\">\n        <div v-for=\"repo in quickSelectRepos\" :key=\"repo.url\" class=\"repo-card\" @click=\"loadQuickRepo(repo)\">\n          <div class=\"repo-icon\">üìÅ</div>\n          <div class=\"repo-info\">\n            <h3>{{ repo.name }}</h3>\n            <p>{{ repo.description }}</p>\n            <span class=\"repo-url\">{{ repo.displayUrl }}</span>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- Local Systems -->\n    <div v-if=\"localSystems.length > 0\" class=\"input-section\">\n      <h2>Local Systems</h2>\n      <div class=\"repo-grid\">\n        <div v-for=\"system in localSystems\" :key=\"system.id\" class=\"repo-card local\" @click=\"loadLocalSystem(system)\">\n          <div class=\"repo-icon\">üíæ</div>\n          <div class=\"repo-info\">\n            <h3>{{ system.name }}</h3>\n            <p>{{ system.description || \"Local system\" }}</p>\n            <span class=\"repo-url\">Local</span>\n          </div>\n          <button @click.stop=\"removeLocalSystem(system.id)\" class=\"remove-btn\">√ó</button>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"input-section\">\n      <h2>Load from GitHub Repository</h2>\n      <div class=\"input-group\">\n        <input v-model=\"githubUrl\" type=\"text\" placeholder=\"https://github.com/user/repo\" class=\"url-input\" />\n        <button @click=\"loadFromGithub\" :disabled=\"loading\">\n          {{ loading ? \"Loading...\" : \"Load from GitHub\" }}\n        </button>\n      </div>\n    </div>\n\n    <div class=\"input-section\">\n      <h2>Load from Local Folder</h2>\n      <div class=\"input-group\">\n        <input\n          type=\"file\"\n          ref=\"folderInput\"\n          webkitdirectory\n          directory\n          multiple\n          @change=\"loadFromLocal\"\n          class=\"file-input\"\n        />\n        <button @click=\"triggerFolderSelect\" :disabled=\"loading\">\n          {{ loading ? \"Loading...\" : \"Select Folder\" }}\n        </button>\n      </div>\n    </div>\n\n    <div v-if=\"error\" class=\"error\">\n      {{ error }}\n    </div>\n\n    <div v-if=\"loadedSystem\" class=\"success\"> Loaded: {{ loadedSystem.name }} </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, onMounted } from \"vue\";\nimport { useRouter, useRoute } from \"vue-router\";\nimport { normalizeGithubRepoUrl, parseGitHubUrl, getRepoZip } from \"~/assets/shared/battlescribe/github\";\nimport {\n  convertToJson,\n  isAllowedExtension,\n  getExtension,\n  removeExtension,\n} from \"~/assets/shared/battlescribe/bs_convert\";\nimport { GameSystemFiles } from \"~/assets/shared/battlescribe/local_game_system\";\nimport type { BSIDataSystem, BSIDataCatalogue } from \"~/assets/shared/battlescribe/bs_types\";\n\nconst githubUrl = ref(\"\");\nconst folderInput = ref<HTMLInputElement>();\nconst loading = ref(false);\nconst error = ref(\"\");\nconst loadedSystem = ref<{ name: string } | null>(null);\n\nconst router = useRouter();\nconst route = useRoute();\nconst gameSystem = new GameSystemFiles();\n\n// Quick select repositories\nconst quickSelectRepos = ref([\n  {\n    name: \"Warhammer 40k 10th Edition\",\n    description: \"Official Warhammer 40,000 10th Edition rules\",\n    url: \"https://github.com/BSData/wh40k-10e\",\n    displayUrl: \"BSData/wh40k-10e\",\n  },\n  {\n    name: \"Warhammer 40k 9th Edition\",\n    description: \"Warhammer 40,000 9th Edition rules\",\n    url: \"https://github.com/BSData/wh40k\",\n    displayUrl: \"BSData/wh40k\",\n  },\n  {\n    name: \"Age of Sigmar\",\n    description: \"Warhammer Age of Sigmar rules\",\n    url: \"https://github.com/BSData/warhammer-age-of-sigmar\",\n    displayUrl: \"BSData/warhammer-age-of-sigmar\",\n  },\n  {\n    name: \"Kill Team\",\n    description: \"Warhammer 40k Kill Team rules\",\n    url: \"https://github.com/BSData/wh40k-killteam\",\n    displayUrl: \"BSData/wh40k-killteam\",\n  },\n  {\n    name: \"Blood Bowl\",\n    description: \"Blood Bowl tabletop game rules\",\n    url: \"https://github.com/BSData/bloodbowl\",\n    displayUrl: \"BSData/bloodbowl\",\n  },\n  {\n    name: \"Necromunda\",\n    description: \"Necromunda skirmish game rules\",\n    url: \"https://github.com/BSData/necromunda\",\n    displayUrl: \"BSData/necromunda\",\n  },\n]);\n\n// Local systems storage\nconst localSystems = ref<\n  Array<{\n    id: string;\n    name: string;\n    description?: string;\n    data: any;\n  }>\n>([]);\n\nconst triggerFolderSelect = () => {\n  folderInput.value?.click();\n};\n\n// Common function to process files\nconst processFiles = async (files: Array<{ path: string; content: string }>) => {\n  for (const { path, content } of files) {\n    try {\n      const data = await convertToJson(content, path);\n\n      if (data.gameSystem) {\n        await gameSystem.setSystem(data as BSIDataSystem);\n        loadedSystem.value = { name: data.gameSystem.name };\n      } else if (data.catalogue) {\n        await gameSystem.setCatalogue(data as BSIDataCatalogue);\n      }\n    } catch (e: any) {\n      console.error(`Failed to process file ${path}:`, e);\n    }\n  }\n\n  if (!loadedSystem.value) {\n    throw new Error(\"No game system found in files\");\n  }\n\n  // Store system globally and navigate to languages page\n  globalThis.system = gameSystem;\n  console.log(\"loaded\", gameSystem.gameSystem?.gameSystem?.name ?? \"Unknown System\");\n  // Navigate to language selection with appropriate system identifier\n  // For GitHub repos, use owner/repo format if available\n  const githubMatch = githubUrl.value?.match(/github\\.com\\/([^\\/]+)\\/([^\\/]+)/);\n  if (githubMatch) {\n    const systemId = `${githubMatch[1]}/${githubMatch[2]}`;\n    await router.push(`/languages/${encodeURIComponent(systemId)}`);\n  } else {\n    // For local uploads, use the system ID\n    const systemId = gameSystem.gameSystem?.gameSystem?.id;\n    if (systemId) {\n      await router.push(`/languages/${encodeURIComponent(systemId)}`);\n    } else {\n      await router.push(\"/\");\n    }\n  }\n};\n\nconst loadFromGithub = async () => {\n  error.value = \"\";\n  loading.value = true;\n\n  try {\n    const normalizedUrl = normalizeGithubRepoUrl(githubUrl.value);\n    if (!normalizedUrl) {\n      throw new Error(\"Invalid GitHub URL format\");\n    }\n\n    const { githubOwner, githubName } = parseGitHubUrl(normalizedUrl);\n\n    // Get repository files\n    const zipEntries = await getRepoZip(githubOwner, githubName);\n\n    // Convert zip entries to common format\n    const files: Array<{ path: string; content: string }> = [];\n    for (const [path, entry] of zipEntries) {\n      if (entry.isDirectory || !isAllowedExtension(path)) continue;\n      const content = await entry.text();\n      files.push({ path, content });\n    }\n\n    await processFiles(files);\n  } catch (e: any) {\n    error.value = e.message || \"Failed to load from GitHub\";\n  } finally {\n    loading.value = false;\n  }\n};\n\nconst loadFromLocal = async (event: Event) => {\n  error.value = \"\";\n  loading.value = true;\n\n  try {\n    const input = event.target as HTMLInputElement;\n    const fileList = Array.from(input.files || []);\n\n    if (fileList.length === 0) {\n      throw new Error(\"No files selected\");\n    }\n\n    // Convert files to common format\n    const files: Array<{ path: string; content: string }> = [];\n    for (const file of fileList) {\n      if (!isAllowedExtension(file.name)) continue;\n      const content = await file.text();\n      files.push({ path: file.name, content });\n    }\n\n    await processFiles(files);\n\n    // Save to local storage\n    await saveSystemLocally(gameSystem);\n  } catch (e: any) {\n    error.value = e.message || \"Failed to load local files\";\n  } finally {\n    loading.value = false;\n  }\n};\n\n// Quick select methods\nconst loadQuickRepo = async (repo: any) => {\n  // For quick repos, navigate directly with the owner/repo format\n  const systemId = repo.displayUrl; // This contains \"owner/repo\" format\n  await router.push(`/languages/${encodeURIComponent(systemId)}`);\n};\n\nconst loadLocalSystem = async (system: any) => {\n  loading.value = true;\n  error.value = \"\";\n\n  try {\n    // Restore the system from saved data\n    if (system.data.gameSystem) {\n      await gameSystem.setSystem(system.data.gameSystem);\n      loadedSystem.value = { name: system.name };\n    }\n\n    // Restore catalogues if any\n    if (system.data.catalogues) {\n      for (const catalogue of system.data.catalogues) {\n        await gameSystem.setCatalogue(catalogue);\n      }\n    }\n\n    globalThis.system = gameSystem;\n    await router.push(`/languages/${encodeURIComponent(system.id)}`);\n  } catch (e: any) {\n    error.value = e.message || \"Failed to load local system\";\n  } finally {\n    loading.value = false;\n  }\n};\n\nconst removeLocalSystem = (systemId: string) => {\n  const index = localSystems.value.findIndex((s) => s.id === systemId);\n  if (index !== -1) {\n    localSystems.value.splice(index, 1);\n    saveLocalSystems();\n  }\n};\n\n// Local storage methods\nconst saveSystemLocally = async (gameSystem: GameSystemFiles) => {\n  if (!gameSystem.gameSystem) return;\n\n  const systemData = {\n    gameSystem: gameSystem.gameSystem,\n    catalogues: Object.values(gameSystem.catalogueFiles),\n  };\n\n  const systemId = gameSystem.gameSystem.gameSystem.id;\n  const systemName = gameSystem.gameSystem.gameSystem.name;\n\n  const existingIndex = localSystems.value.findIndex((s) => s.id === systemId);\n  const systemEntry = {\n    id: systemId,\n    name: systemName,\n    description: \"Uploaded from local files\",\n    data: systemData,\n  };\n\n  if (existingIndex !== -1) {\n    localSystems.value[existingIndex] = systemEntry;\n  } else {\n    localSystems.value.push(systemEntry);\n  }\n\n  saveLocalSystems();\n};\n\nconst saveLocalSystems = () => {\n  localStorage.setItem(\"nr-translation-local-systems\", JSON.stringify(localSystems.value));\n};\n\nconst loadLocalSystems = () => {\n  try {\n    const stored = localStorage.getItem(\"nr-translation-local-systems\");\n    if (stored) {\n      localSystems.value = JSON.parse(stored);\n    }\n  } catch (e) {\n    console.error(\"Failed to load local systems:\", e);\n  }\n};\n\n// URL-based system loading\nconst loadFromUrl = async () => {\n  const systemParam = route.query.system as string;\n  if (!systemParam) return;\n\n  // Check if it's a local system\n  const localSystem = localSystems.value.find((s) => s.id === systemParam);\n  if (localSystem) {\n    await loadLocalSystem(localSystem);\n    return;\n  }\n\n  // Check if it's a quick select repo\n  const quickRepo = quickSelectRepos.value.find((r) => r.url.includes(systemParam) || r.displayUrl === systemParam);\n  if (quickRepo) {\n    await loadQuickRepo(quickRepo);\n    return;\n  }\n\n  // Try to load as GitHub URL\n  if (systemParam.startsWith(\"http\")) {\n    githubUrl.value = systemParam;\n    await loadFromGithub();\n  }\n};\n\n// Initialize\nonMounted(() => {\n  loadLocalSystems();\n  loadFromUrl();\n});\n</script>\n\n<style scoped>\n.container {\n  max-width: 800px;\n  margin: 0 auto;\n  padding: 2rem;\n}\n\n.input-section {\n  margin-bottom: 2rem;\n  padding: 1.5rem;\n  border: 1px solid #ddd;\n  border-radius: 8px;\n}\n\n.input-group {\n  display: flex;\n  gap: 1rem;\n  align-items: center;\n}\n\n.url-input {\n  flex: 1;\n  padding: 0.5rem;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  font-size: 1rem;\n}\n\n.file-input {\n  display: none;\n}\n\nbutton {\n  padding: 0.5rem 1rem;\n  background-color: #007bff;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  font-size: 1rem;\n}\n\nbutton:hover:not(:disabled) {\n  background-color: #0056b3;\n}\n\nbutton:disabled {\n  background-color: #6c757d;\n  cursor: not-allowed;\n}\n\n.error {\n  margin-top: 1rem;\n  padding: 1rem;\n  background-color: #f8d7da;\n  color: #721c24;\n  border-radius: 4px;\n}\n\n.success {\n  margin-top: 1rem;\n  padding: 1rem;\n  background-color: #d4edda;\n  color: #155724;\n  border-radius: 4px;\n}\n\nh1 {\n  margin-bottom: 2rem;\n}\n\nh2 {\n  margin-bottom: 1rem;\n  font-size: 1.2rem;\n}\n\n/* Repository grid styles */\n.repo-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\n  gap: 1rem;\n}\n\n.repo-card {\n  background: #fff;\n  border: 1px solid #ddd;\n  border-radius: 8px;\n  padding: 1rem;\n  cursor: pointer;\n  transition: all 0.2s;\n  display: flex;\n  align-items: flex-start;\n  gap: 1rem;\n  position: relative;\n}\n\n.repo-card:hover {\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n  transform: translateY(-2px);\n  border-color: #007bff;\n}\n\n.repo-card.local {\n  border-left: 4px solid #28a745;\n}\n\n.repo-icon {\n  font-size: 1.5rem;\n  flex-shrink: 0;\n}\n\n.repo-info {\n  flex: 1;\n}\n\n.repo-info h3 {\n  margin: 0 0 0.5rem 0;\n  font-size: 1rem;\n  color: #333;\n}\n\n.repo-info p {\n  margin: 0 0 0.5rem 0;\n  font-size: 0.875rem;\n  color: #666;\n  line-height: 1.4;\n}\n\n.repo-url {\n  font-size: 0.75rem;\n  color: #999;\n  font-family: monospace;\n}\n\n.remove-btn {\n  position: absolute;\n  top: 0.5rem;\n  right: 0.5rem;\n  width: 24px;\n  height: 24px;\n  border-radius: 50%;\n  background: #dc3545;\n  color: white;\n  border: none;\n  font-size: 0.875rem;\n  line-height: 1;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.remove-btn:hover {\n  background: #c82333;\n}\n</style>\n"],"names":["githubUrl","ref","folderInput","loading","error","loadedSystem","router","useRouter","route","useRoute","gameSystem","GameSystemFiles","quickSelectRepos","localSystems","triggerFolderSelect","processFiles","files","path","content","data","convertToJson","e","githubMatch","systemId","loadFromGithub","normalizedUrl","normalizeGithubRepoUrl","githubOwner","githubName","parseGitHubUrl","zipEntries","getRepoZip","entry","isAllowedExtension","loadFromLocal","event","input","fileList","file","saveSystemLocally","loadQuickRepo","repo","loadLocalSystem","system","catalogue","removeLocalSystem","index","s","saveLocalSystems","systemData","systemName","existingIndex","systemEntry","loadLocalSystems","stored","loadFromUrl","systemParam","localSystem","quickRepo","r","onMounted","_openBlock","_createElementBlock","_hoisted_1","_cache","_createElementVNode","_hoisted_2","_hoisted_3","_Fragment","_renderList","$event","_hoisted_5","_toDisplayString","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_10","_withModifiers","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19"],"mappings":"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"}