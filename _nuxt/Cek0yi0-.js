import{d as T,r as g,x as d,K as $,N,z as s,O as S,Y as C,Z as I,y as u,_ as U,A as p,k as f,B as E,$ as F,L as D,M,J as es,I as ls,a0 as ns,P as os}from"./PIpq5hpi.js";import{u as as}from"./Cz3oM3EE.js";const is={class:"dialog"},ds={class:"dialog-header"},us={class:"dialog-content"},rs={class:"format-options"},cs={class:"format-option"},vs={class:"format-option"},ps={class:"format-option"},ms={class:"format-option"},ys={class:"export-options"},gs={class:"checkbox-option"},bs=["disabled"],fs={class:"checkbox-option"},Ss=["disabled"],ks={class:"dialog-footer"},$s=T({__name:"ExportDialog",props:{show:{type:Boolean}},emits:["close","export"],setup(_,{emit:c}){const h=c,l=g("json"),m=g(!1),o=g(!1),a=()=>{h("export",{format:l.value,onlyTranslated:m.value,onlyUntranslated:o.value})};return(r,t)=>r.show?(u(),d("div",{key:0,class:"dialog-overlay",onClick:t[8]||(t[8]=N(e=>r.$emit("close"),["self"]))},[s("div",is,[s("div",ds,[t[9]||(t[9]=s("h2",null,"Export Translations",-1)),s("button",{onClick:t[0]||(t[0]=e=>r.$emit("close")),class:"dialog-close"},"×")]),s("div",us,[t[20]||(t[20]=s("p",null,"Select export format:",-1)),s("div",rs,[s("label",cs,[S(s("input",{type:"radio","onUpdate:modelValue":t[1]||(t[1]=e=>l.value=e),value:"json"},null,512),[[C,l.value]]),t[10]||(t[10]=s("span",null,"JSON (Full)",-1)),t[11]||(t[11]=s("small",null,"Complete translation data with metadata",-1))]),s("label",vs,[S(s("input",{type:"radio","onUpdate:modelValue":t[2]||(t[2]=e=>l.value=e),value:"json-kv"},null,512),[[C,l.value]]),t[12]||(t[12]=s("span",null,"JSON (Key-Value)",-1)),t[13]||(t[13]=s("small",null,"Simple key-value pairs format",-1))]),s("label",ps,[S(s("input",{type:"radio","onUpdate:modelValue":t[3]||(t[3]=e=>l.value=e),value:"csv"},null,512),[[C,l.value]]),t[14]||(t[14]=s("span",null,"CSV",-1)),t[15]||(t[15]=s("small",null,"Spreadsheet-compatible format",-1))]),s("label",ms,[S(s("input",{type:"radio","onUpdate:modelValue":t[4]||(t[4]=e=>l.value=e),value:"po"},null,512),[[C,l.value]]),t[16]||(t[16]=s("span",null,"PO (gettext)",-1)),t[17]||(t[17]=s("small",null,"GNU gettext format for translation tools",-1))])]),s("div",ys,[s("label",gs,[S(s("input",{type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=e=>m.value=e),disabled:o.value},null,8,bs),[[I,m.value]]),t[18]||(t[18]=s("span",null,"Export only translated strings",-1))]),s("label",fs,[S(s("input",{type:"checkbox","onUpdate:modelValue":t[6]||(t[6]=e=>o.value=e),disabled:m.value},null,8,Ss),[[I,o.value]]),t[19]||(t[19]=s("span",null,"Export only untranslated strings",-1))])])]),s("div",ks,[s("button",{onClick:t[7]||(t[7]=e=>r.$emit("close")),class:"dialog-button cancel"},"Cancel"),s("button",{onClick:a,class:"dialog-button primary"},"Export")])])])):$("",!0)}}),hs=Object.assign(U($s,[["__scopeId","data-v-845f1c29"]]),{__name:"ExportDialog"}),Cs={class:"dialog"},_s={class:"dialog-header"},ws={class:"dialog-content"},Fs={class:"submit-options"},Ts={class:"checkbox-option"},Us={key:0,class:"submit-status"},Vs={class:"dialog-footer"},Es=["disabled"],Is=T({__name:"SubmitDialog",props:{show:{type:Boolean},isSubmitting:{type:Boolean}},emits:["close","submit"],setup(_,{emit:c}){const h=c,l=g(!0),m=()=>{h("submit",{onlyModified:l.value})};return(o,a)=>o.show?(u(),d("div",{key:0,class:"dialog-overlay",onClick:a[3]||(a[3]=N(r=>o.$emit("close"),["self"]))},[s("div",Cs,[s("div",_s,[a[4]||(a[4]=s("h2",null,"Submit Translations",-1)),s("button",{onClick:a[0]||(a[0]=r=>o.$emit("close")),class:"dialog-close"},"×")]),s("div",ws,[a[8]||(a[8]=s("p",null,"Submit translations to configured backend",-1)),s("div",Fs,[s("label",Ts,[S(s("input",{type:"checkbox","onUpdate:modelValue":a[1]||(a[1]=r=>l.value=r)},null,512),[[I,l.value]]),a[5]||(a[5]=s("span",null,"Submit only modified translations",-1)),a[6]||(a[6]=s("small",null,"Recommended to avoid overwriting unchanged translations",-1))])]),o.isSubmitting?(u(),d("div",Us,a[7]||(a[7]=[s("p",null,"Submitting translations...",-1)]))):$("",!0)]),s("div",Vs,[s("button",{onClick:a[2]||(a[2]=r=>o.$emit("close")),class:"dialog-button cancel"},"Cancel"),s("button",{onClick:m,class:"dialog-button primary",disabled:o.isSubmitting},p(o.isSubmitting?"Submitting...":"Submit"),9,Es)])])])):$("",!0)}}),Ns=Object.assign(U(Is,[["__scopeId","data-v-c94acd5f"]]),{__name:"SubmitDialog"}),xs={class:"dialog"},Bs={class:"dialog-header"},Ds={class:"dialog-content"},Ms={key:0},Os={class:"file-input-section"},js={key:0,class:"selected-file"},Rs={key:1},Js={key:2,class:"conflict-info"},As={key:3,class:"sync-options"},Ks={class:"radio-option"},Ps={class:"radio-option"},zs={class:"radio-option"},Ls={key:4,class:"sync-status"},Gs={class:"dialog-footer"},Hs=["disabled"],Ys=T({__name:"SyncDialog",props:{show:{type:Boolean},syncConflicts:{},selectedFile:{},isSyncing:{type:Boolean},canSync:{type:Boolean}},emits:["close","file-select","sync"],setup(_,{emit:c}){const h=_,l=c,m=g(null),o=g("ask-user"),a=t=>{const e=t.target;e.files&&e.files.length>0&&l("file-select",e.files[0])},r=()=>{l("sync",{syncStrategy:o.value,selectedFile:h.selectedFile})};return(t,e)=>t.show?(u(),d("div",{key:0,class:"dialog-overlay",onClick:e[5]||(e[5]=N(y=>t.$emit("close"),["self"]))},[s("div",xs,[s("div",Bs,[e[6]||(e[6]=s("h2",null,"Sync Translations",-1)),s("button",{onClick:e[0]||(e[0]=y=>t.$emit("close")),class:"dialog-close"},"×")]),s("div",Ds,[t.canSync?(u(),d("div",Rs,e[10]||(e[10]=[s("p",null,"Backend configured and ready for sync",-1)]))):(u(),d("div",Ms,[e[8]||(e[8]=s("p",null,[s("strong",null,"No backend configured")],-1)),e[9]||(e[9]=s("p",null,"Select a translation file to import:",-1)),s("div",Os,[s("input",{type:"file",ref_key:"fileInput",ref:m,onChange:a,accept:".json,.po,.csv",class:"file-input"},null,544),e[7]||(e[7]=s("p",{class:"file-help"},"Supported formats: JSON, PO (gettext), CSV",-1)),t.selectedFile?(u(),d("div",js," Selected: "+p(t.selectedFile.name),1)):$("",!0)])])),t.syncConflicts.length>0?(u(),d("div",Js,[s("p",null,[s("strong",null,p(t.syncConflicts.length)+" conflicts detected",1)]),e[11]||(e[11]=s("p",null,"Some translations have been modified both locally and on the server.",-1))])):$("",!0),t.selectedFile||t.canSync?(u(),d("div",As,[e[18]||(e[18]=s("p",null,"How would you like to handle conflicts?",-1)),s("label",Ks,[S(s("input",{type:"radio","onUpdate:modelValue":e[1]||(e[1]=y=>o.value=y),value:"server-wins"},null,512),[[C,o.value]]),e[12]||(e[12]=s("span",null,"Import wins",-1)),e[13]||(e[13]=s("small",null,"Overwrite local changes with imported versions",-1))]),s("label",Ps,[S(s("input",{type:"radio","onUpdate:modelValue":e[2]||(e[2]=y=>o.value=y),value:"client-wins"},null,512),[[C,o.value]]),e[14]||(e[14]=s("span",null,"Keep local changes",-1)),e[15]||(e[15]=s("small",null,"Keep your local translations, ignore imported changes",-1))]),s("label",zs,[S(s("input",{type:"radio","onUpdate:modelValue":e[3]||(e[3]=y=>o.value=y),value:"ask-user"},null,512),[[C,o.value]]),e[16]||(e[16]=s("span",null,"Ask me for each conflict",-1)),e[17]||(e[17]=s("small",null,"Show me each conflict and let me choose",-1))])])):$("",!0),t.isSyncing?(u(),d("div",Ls,[s("p",null,p(t.selectedFile?"Importing translations...":"Syncing translations..."),1)])):$("",!0)]),s("div",Gs,[s("button",{onClick:e[4]||(e[4]=y=>t.$emit("close")),class:"dialog-button cancel"},"Cancel"),s("button",{onClick:r,class:"dialog-button primary",disabled:t.isSyncing||!t.selectedFile&&!t.canSync},p(t.isSyncing?t.selectedFile?"Importing...":"Syncing...":t.selectedFile?"Import":"Sync"),9,Hs)])])])):$("",!0)}}),Zs=Object.assign(U(Ys,[["__scopeId","data-v-4e4dce3f"]]),{__name:"SyncDialog"}),qs={class:"container"},Qs={class:"translation-interface"},Ws={class:"header"},Xs={class:"header-stats"},st={class:"header-actions"},tt=["title"],et=["disabled","title"],lt={class:"translation-content scrollable"},nt={class:"hierarchy-container"},ot={class:"hierarchy-item system-level"},at={class:"toggle-icon"},it={class:"system-name"},dt={class:"item-count"},ut={key:0,class:"hierarchy-children"},rt=["onClick"],ct={class:"toggle-icon"},vt={class:"catalogue-name"},pt={class:"item-count"},mt={key:0,class:"strings-table"},yt={class:"col-original"},gt={class:"original-text"},bt={class:"col-translation"},ft=["onUpdate:modelValue","onInput","placeholder"],St={class:"col-status"},kt=["onClick","title"],$t={key:0,class:"status-icon check"},ht={key:1,class:"status-icon cross"},Ct={class:"col-actions"},_t=["onClick"],wt=T({__name:"index",setup(_){const c=es(),h=ls(),l=as(),m=g(!0),o=g(new Set),a=g(!1),r=g(!1),t=g(!1),e=g([]),y=g(null),O=f(()=>l.systemName),j=f(()=>l.catalogues),R=f(()=>l.totalStrings),J=f(()=>l.translatedCount),A=f(()=>l.systemStringCount),x=f(()=>l.canSubmit),K=f(()=>l.isSubmitting),B=f(()=>l.canSync),P=f(()=>l.isSyncing),k=f(()=>c.params.lang),V=f(()=>({en:"English",es:"Spanish",fr:"French",de:"German",it:"Italian",pt:"Portuguese",ru:"Russian",ja:"Japanese",zh:"Chinese"})[k.value]||k.value),z=()=>{const n=c.params.system;h.push(`/languages/${encodeURIComponent(n)}`)},L=()=>{m.value=!m.value},G=n=>{o.value.has(n)?o.value.delete(n):o.value.add(n)},H=n=>{l.updateTranslation(n.id,n.translation,c.params.system,k.value)},Y=n=>{n.translated?l.updateTranslation(n.id,"",c.params.system,k.value):l.updateTranslation(n.id,n.original,c.params.system,k.value)},Z=n=>{const i=c.params.system;h.push(`/translate/${encodeURIComponent(i)}/${k.value}/${encodeURIComponent(n.key)}`)},q=n=>{y.value=n},Q=()=>{t.value=!1,y.value=null,e.value=[]},W=async n=>{try{let i;if(n.selectedFile?i=await l.syncFromFile(n.selectedFile,c.params.system,k.value,n.syncStrategy):i=await l.syncFromBackend(c.params.system,k.value,n.syncStrategy),i.conflicts.length>0&&n.syncStrategy==="ask-user"){e.value=i.conflicts;return}t.value=!1,e.value=[],y.value=null;const v=n.selectedFile?"Translations imported successfully":"Translations synced successfully";console.log(v)}catch(i){console.error("Failed to sync translations:",i),alert("Failed to sync translations: "+i.message)}},X=async n=>{try{await l.submitToBackend(c.params.system,k.value,n.onlyModified),r.value=!1,console.log("Translations submitted successfully")}catch(i){console.error("Failed to submit translations:",i),alert("Failed to submit translations: "+i.message)}},ss=n=>{l.downloadExport(n.format,k.value,V.value,l.systemName,n.onlyTranslated,n.onlyUntranslated),a.value=!1};return(n,i)=>(u(),d("div",qs,[E(hs,{show:a.value,onClose:i[0]||(i[0]=v=>a.value=!1),onExport:ss},null,8,["show"]),E(Ns,{show:r.value,"is-submitting":K.value,onClose:i[1]||(i[1]=v=>r.value=!1),onSubmit:X},null,8,["show","is-submitting"]),E(Zs,{show:t.value,"sync-conflicts":e.value,"selected-file":y.value,"is-syncing":P.value,"can-sync":B.value,onClose:Q,onFileSelect:q,onSync:W},null,8,["show","sync-conflicts","selected-file","is-syncing","can-sync"]),s("div",Qs,[s("div",Ws,[s("button",{onClick:z,class:"back-button"},"← Back to Languages"),s("h1",null,"Translate to "+p(V.value),1),s("div",Xs,[s("span",null,p(J.value)+"/"+p(R.value)+" translated",1)]),s("div",st,[s("button",{onClick:i[2]||(i[2]=v=>t.value=!0),class:"sync-button",title:B.value?"Sync translations from backend":"Import translations from file"}," Sync Translations ",8,tt),s("button",{onClick:i[3]||(i[3]=v=>r.value=!0),class:"submit-button",disabled:!x.value,title:x.value?"Submit translations to backend":"No backend configured"}," Submit Translations ",8,et),s("button",{onClick:i[4]||(i[4]=v=>a.value=!0),class:"export-button"}," Export Translations ")])]),s("div",lt,[s("div",nt,[s("div",ot,[s("button",{class:F(["hierarchy-toggle",{expanded:m.value}]),onClick:L},[s("span",at,p(m.value?"▼":"▶"),1),s("span",it,p(O.value),1),s("span",dt,"("+p(A.value)+" strings)",1)],2),m.value?(u(),d("div",ut,[(u(!0),d(D,null,M(j.value,v=>(u(),d("div",{key:v.id,class:"hierarchy-item catalogue-level"},[s("button",{class:F(["hierarchy-toggle",{expanded:o.value.has(v.id)}]),onClick:b=>G(v.id)},[s("span",ct,p(o.value.has(v.id)?"▼":"▶"),1),s("span",vt,p(v.name),1),s("span",pt,"("+p(v.stringCount)+" strings)",1)],10,rt),o.value.has(v.id)?(u(),d("div",mt,[i[5]||(i[5]=ns('<div class="table-header" data-v-1ef5c8d6><div class="col-original" data-v-1ef5c8d6>Original Text</div><div class="col-translation" data-v-1ef5c8d6>Translation</div><div class="col-status" data-v-1ef5c8d6>Status</div><div class="col-actions" data-v-1ef5c8d6>Actions</div></div>',1)),(u(!0),d(D,null,M(v.strings,(b,ts)=>(u(),d("div",{key:b.id,class:F(["table-row",{translated:b.translated,"row-even":ts%2===0}])},[s("div",yt,[s("div",gt,p(b.original),1)]),s("div",bt,[S(s("textarea",{"onUpdate:modelValue":w=>b.translation=w,onInput:w=>H(b),placeholder:`Enter ${V.value} translation...`,class:"translation-input",rows:"2"},null,40,ft),[[os,b.translation]])]),s("div",St,[s("button",{onClick:w=>Y(b),class:F(["status-toggle",{translated:b.translated}]),title:b.translated?"Mark as untranslated":"Mark as translated"},[b.translated?(u(),d("span",$t,"✓")):(u(),d("span",ht,"✗"))],10,kt)]),s("div",Ct,[s("button",{onClick:w=>Z(b),class:"edit-button",title:"Edit individually"}," ✎ ",8,_t)])],2))),128))])):$("",!0)]))),128))])):$("",!0)])])])])]))}}),Ut=U(wt,[["__scopeId","data-v-1ef5c8d6"]]);export{Ut as default};
//# sourceMappingURL=Cek0yi0-.js.map
